{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, createContext, useRef } from \"react\";\nimport { signOut, createUserWithEmailAndPassword, onAuthStateChanged, getAuth } from \"firebase/auth\";\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var AuthenticationContext = createContext();\nvar loginRequest = function loginRequest(auth, email, password) {\n  return signInWithEmailAndPassword(auth, email, password);\n};\nexport var AuthenticationContextProvider = function AuthenticationContextProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    user = _useState4[0],\n    setUser = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var auth = useRef(getAuth()).current;\n  onAuthStateChanged(auth, function (usr) {\n    if (usr) {\n      setUser(usr);\n      setIsLoading(false);\n    } else {\n      setIsLoading(false);\n    }\n  });\n  var onLogin = function onLogin(email, password) {\n    setIsLoading(true);\n    loginRequest(auth, email, password).then(function (u) {\n      setUser(u);\n      setIsLoading(false);\n    }).catch(function (e) {\n      setIsLoading(false);\n      setError(e.toString());\n    });\n  };\n  var onRegister = function onRegister(email, password, repeatedPassword) {\n    setIsLoading(true);\n    if (password !== repeatedPassword) {\n      setError(\"Error: Passwords do not match\");\n      return;\n    }\n    createUserWithEmailAndPassword(auth, email, password).then(function (u) {\n      setUser(u);\n      setIsLoading(false);\n    }).catch(function (e) {\n      setIsLoading(false);\n      setError(e.toString());\n    });\n  };\n  var onLogout = function onLogout() {\n    signOut(auth).then(function () {\n      setUser(null);\n      setError(null);\n    });\n  };\n  return _jsx(AuthenticationContext.Provider, {\n    value: {\n      isAuthenticated: !!user,\n      user: user,\n      isLoading: isLoading,\n      error: error,\n      setError: setError,\n      onLogin: onLogin,\n      onRegister: onRegister,\n      onLogout: onLogout\n    },\n    children: children\n  });\n};","map":{"version":3,"names":["React","useState","createContext","useRef","signOut","createUserWithEmailAndPassword","onAuthStateChanged","getAuth","signInWithEmailAndPassword","jsx","_jsx","AuthenticationContext","loginRequest","auth","email","password","AuthenticationContextProvider","_ref","children","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","user","setUser","_useState5","_useState6","error","setError","current","usr","onLogin","then","u","catch","e","toString","onRegister","repeatedPassword","onLogout","Provider","value","isAuthenticated"],"sources":["C:/Users/med/Documents/TheisiÂµProject  worker/front/src/services/authentication/authentication.context.js"],"sourcesContent":["import React, { useState, createContext, useRef } from \"react\";\nimport {\n  signOut,\n  createUserWithEmailAndPassword,\n  onAuthStateChanged,\n  getAuth,\n} from \"firebase/auth\";\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\n\nexport const AuthenticationContext = createContext();\n\nconst loginRequest = (auth, email, password) =>\n  signInWithEmailAndPassword(auth, email, password);\nexport const AuthenticationContextProvider = ({ children }) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState(null);\n  const auth = useRef(getAuth()).current;\n  \n  onAuthStateChanged(auth, (usr) => {\n    if (usr) {\n      setUser(usr);\n      setIsLoading(false);\n    } else {\n      setIsLoading(false);\n    }\n  });\n\n  const onLogin = (email, password) => {\n    setIsLoading(true);\n    loginRequest(auth, email, password)\n      .then((u) => {\n        setUser(u);\n        setIsLoading(false);\n      })\n      .catch((e) => {\n        setIsLoading(false);\n        setError(e.toString());\n      });\n  };\n\n  const onRegister = (email, password, repeatedPassword) => {\n    setIsLoading(true);\n    if (password !== repeatedPassword) {\n      setError(\"Error: Passwords do not match\");\n      return;\n    }\n    createUserWithEmailAndPassword(auth, email, password)\n      .then((u) => {\n        setUser(u);\n        setIsLoading(false);\n      })\n      .catch((e) => {\n        setIsLoading(false);\n        setError(e.toString());\n      });\n  };\n\n  const onLogout = () => {\n    signOut(auth).then(() => {\n      setUser(null);\n      setError(null);\n    });\n  };\n\n  return (\n    <AuthenticationContext.Provider\n      value={{\n        isAuthenticated: !!user,\n        user,\n        isLoading,\n        error,\n        setError,\n        onLogin,\n        onRegister,\n        onLogout,\n      }}\n    >\n      {children}\n    </AuthenticationContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}